<!doctype html>
<html lang="fi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Kuka on heistä kaikkein kaunein? Näin syntyi Tyyppiarvon kilpailun voittanut missiennustus - Tyyppiarvo </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="" />
    <meta property="og:site_name" content="Tyyppiarvo" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://tyyppiarvo.netlify.app/blog/2016-09-21-kuka-on-heista-kaikkein-kaunein-nain-syntyi-tyyppiarvon-kilpailun-voittanut-missiennustus/" />
    <meta property="og:title" content="Kuka on heistä kaikkein kaunein? Näin syntyi Tyyppiarvon kilpailun voittanut missiennustus" />
    <meta property="og:image" content="https://tyyppiarvo.netlify.app/" />
    <meta property="og:description" content="" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="Kuka on heistä kaikkein kaunein? Näin syntyi Tyyppiarvon kilpailun voittanut missiennustus" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:image" content="https://tyyppiarvo.netlify.app/" />

    <link rel="canonical" href="https://tyyppiarvo.netlify.app/blog/2016-09-21-kuka-on-heista-kaikkein-kaunein-nain-syntyi-tyyppiarvon-kilpailun-voittanut-missiennustus/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://tyyppiarvo.netlify.app/css/custom.css" />

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css" integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin="anonymous" />
    

    

    <link rel="shortcut icon"
        href="https://tyyppiarvo.netlify.app/images/favicon.png">

    
    <link href="https://tyyppiarvo.netlify.app/index.xml" rel="alternate" type="application/rss+xml" title="Tyyppiarvo" />
    
</head>

<body>
    
<div class="mt-xl header">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="https://tyyppiarvo.netlify.app/">
                    <h1 class="name">Tyyppiarvon arkisto</h1>
                </a>
            </div>
        </div>

        <div class="row justify-content-center">
            <ul class="nav nav-primary">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://tyyppiarvo.netlify.app/">
                        
                        Etusivu
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://tyyppiarvo.netlify.app/about/">
                        
                        Tyyppiarvo
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://tyyppiarvo.netlify.app/archive/">
                        
                        Lehdet
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://blogs.helsinki.fi/moodi-ry/">
                        
                        Moodi
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/joniok/tyyppiarvo">
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

<div class="content">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-12 col-lg-8">
                <h1 class="mx-0 mx-md-4 blog-post-title">Kuka on heistä kaikkein kaunein? Näin syntyi Tyyppiarvon kilpailun voittanut missiennustus</h1>

                <div class="mb-md-4 meta">
                    
                    
                    

                    <span class="date middot" title='Wed Sep 21 2016 00:00:00 UTC'>
                        2016-09-21
                    </span>

                    <span class="reading-time middot">
                        5 min read
                    </span>

                    <div class="d-none d-md-inline tags">
                        <ul class="list-unstyled d-inline">
                            
                        </ul>
                    </div>
                </div>

                <div class="markdown blog-post-content">
                    
    <p>[caption id=&quot;&quot; align=&ldquo;alignnone&rdquo; width=&ldquo;7071&rdquo;]<img src="http://misssuomi.kuvat.fi/kuvat/Miss%20Suomi%202016/Miss%20Suomi%202016%20J%C3%A4rvisyd%C3%A4n%20Juhlapuku/ms16js3-250.jpg/_full.jpg" alt="Kuva: Nadi Hammouda/Miss Suomi -kuvapankki"> Missiehdokkaat esittelemässä juhlapukuja Rantasalmen Järvisydämellä. Kuva: Nadi Hammouda / Miss Suomi -kuvapankki.[/caption]</p>
<p><em>Tyyppiarvo esitti keväällä 2016 avoimen haasteen, jossa tavoitteena oli ennustaa Miss Suomi kilpailun kolmen kärki ja voittaja. Haastetta varten tyyppiarvon toimitus keräsi kasaan kattavan missitietokannan, joka avattiin yleisöllä kahta viikkoa ennen vuoden 2016 kilpailun ratkeamista. Tämä artikkeli kertoo, kuinka haasteen voittanut ennuste rakentui.</em></p>
<hr>
<p><strong>Tuomo Nieminen, teksti</strong></p>
<p>Tyyppiarvon <a href="http://tyyppiarvo.com/2016/05/tyyppiarvon-suuri-missihaaste-ennusta-vuoden-2016-voittajat/">missiennustushaaste</a> tarjosi huikean tilaisuudeen päästä soveltamaan nykyaikaisia tilastollisia menetelmiä. Tarjolla oli uniikki aineisto kauneuskilpailijoiden kasvokuvia ja menneiden kilpaluiden tuloksia.</p>
<p>Digitaaliset kuvat ovat yksi esimerkki kenties hieman yllättävästä numeerisen datan lähteestä. Kuvat esitetään yleensä nelikulmiona ja ne koostuvat pienistä pisteistä. Jokaisen pisteen väri voidaan yksinkertaisimmassa tapauksissa kuvata yhdellä numerolla, värikuvan tapauksessa kolmella numerolla (RGB).</p>
<p>Tyyppiarvon kevään 2016 missihaaste sisälsi toimituksen keräämiä tietoa edellisten ja nykyisen vuoden kilpailijoista 64x64 harmaansävykuvina. Suhteellisen heikosta laadustaan huolimatta kuvat tarjosivat todella suuren määrän numeerista informaatiota jokaisesta kilpailijasta, sillä kuvat liittivät jokaiseen kilpailijaan 64x64 = 4096 muuttujaa.</p>
<p>Näiden lisäksi haasteen mukana toimitettuun datasettiin kuului tietoja kilpalijoiden kriittisistä mitoista, iästä ja asuinpaikasta - kymmenisen muuttujaa lisää. Varsinainen kiinnostuksen kohde, eli kilpailijoiden sijoitukset, löytyi tietysti myös.</p>
<blockquote>
<p>Yleisimmin käytössä olevat menetelmät eivät ole suunniteltu tilanteisiin, joissa muuttujien lukumäärä on lähellä havaintojen lukumäärää, saati sitten suurempi.</p>
</blockquote>
<p><strong>Perinteiset tilastolliset</strong> menetelmät on lähtökohtaisesti suunniteltu tilanteisiin, joissa havaintoyksiköitä (kilpailija) on suhteellisen pieni määrä ja muuttujia vielä vähemmän. Havaintoyksiköiden määrän kasvaminen ei useimmiten aiheuta ongelmia (päinvastoin), mutta muuttujien määrän kasvaminen on yleensä ongelma.</p>
<p>Yleisimmin käytössä olevat menetelmät eivät ole suunniteltu tilanteisiin, joissa muuttujien lukumäärä on lähellä havaintojen lukumäärää, saati sitten suurempi. Missihaastessa havaintoja oli vain kymmeniä ja muuttujia yli neljä tuhatta. Hyvän ennustuksen tekemiseen tarvittiin luovia ja nykyaikaisia ratkaisuja.</p>
<p>[caption id=&quot;&quot; align=&ldquo;alignnone&rdquo; width=&ldquo;553&rdquo;]<img src="http://gdurl.com/O1Ke" alt=""> Kuvassa missikandidaattien todennäköisyyksiä päästä kolmen parhaan joukkoon.[/caption]</p>
<p><strong>Miksi muuttujien</strong> suuri määrä sitten on ongelma ja mikä on perinteisten (tilastollisten) menetelmien heikkous?</p>
<p>Voisi sanoa, että se on ahneus. Käytetyimmät menetelmät on suunniteltu maksimoimaan selittämisvoima niille syötetyn havaintoaineiston suhteen. Tämä kuulostaa tietenkin lähtökohtaisesti hyvältä. Mutta silloin kun muuttujia - eli mahdollisia selittäjiä - on paljon, muodostuu ongelmaksi ylimallintaminen (overfitting).</p>
<p>Melkein kaikki tilastolliset ennusteet perustuvat lineaarisen mallin ajatukseen: $$y = x_1 \cdot w_1 + .. + x_k \cdot w_k$$. Selittäjiä $$x_i$$ kerrotaan sopivilla painoilla $$w_i$$ ja muuttujien painotetusta summasta muodostuva suora kuvaa yhteyttä selitettävän muuttujan $$y$$ odotusarvoon.</p>
<p>Mallin etsiminen (sovittaminen) on yksinkertaisesti parhaimpien painojen $$w_i$$ ratkaisemista niin, että malli tekee keskimäärin mahdollisimman pieniä virheitä, eli ennustaa lähelle todellisia havaintoja $$y$$.</p>
<p>Tällaisen suoran etsiminen saattaa kuulostaa yksinkertaiselta tai rajoittavalta, mutta todellisuudessa mahdollistaa vaikka mitä, sillä yleisemmässä muodossa selittäjien $$x$$ tilalla voidaan käyttää mitä tahansa muunnosta $$f(x)$$, jolloin malli onkin selittäjien $$x$$ suhteen vaikka kuinka kurvikas.</p>
<p>Tästä syystä villeimmät ja seksikkäimmätkin nykyajan tilastotieteen menetelmät, kuten vaikkapa neuroverkot, ovat loppujen lopuksi muunnelmia lineaarisesta mallista.</p>
<blockquote>
<p>villeimmät ja seksikkäimmätkin nykyajan tilastotieteen menetelmät, kuten vaikkapa neuroverkot, ovat loppujen lopuksi muunnelmia lineaarisesta mallista.</p>
</blockquote>
<p><strong>Niin mikä ylimallintaminen?</strong> Yksinkertaisin esimerkki ylimallintamisesta saadaan <em>polynomiregression</em> avulla. Olkoon malli $$y = a + x^1 \cdot b_1 + x^2 \cdot b_2 &hellip; x^d \cdot b_d$$, jossa sekä $$y$$, että $$x$$ koostuvat useasta elementistä (havainnoista ja niihin liittyvistä muuttujista).</p>
<p>Kun $$d=1$$, eli malli on $$x$$ suhteen suora, saadaan suora $$a + x^1 \cdot b_1$$ kulkemaan minkä tahansa kahden $$y$$ pisteen kautta valitsemalla $$a$$ ja $$b_1$$ sopivasti. Malli siis voidaan valita selittämään kahta havaintoa täydellisesti.</p>
<p>Kun $$d=2$$ saadaan taas paraabeli $$a + x^1 \cdot b_1 + x^2 \cdot b_2$$ kulkemaan minkä tahansa kolmen pisteen kautta valitsemalla $$a, b_1$$ ja $$b_2$$ sopivasti.</p>
<p>Vastaava pätee aina eteenpäin.</p>
<p>Valitsemalla riittävän monimutkainen malli, kuten esimerkiksi polynomi jonka aste on yksi vähemmän kuin havaintoja, voidaan havainnot selittää täydellisesti muuttujien $$x$$ avulla. Havaintojen selittäminen täydellisesti on ennusteita tehtäessä yleensä aina huono asia, sillä oletuksena on, että havaintoihin liittyy satunnaisvaihtelua.</p>
<p>Ilmiötä, johon liiitty satunnaisuutta, ei lähtökohtaisesti voida täydellisesti ennustaa, joten pyrkimys luoda täydellisesti ennustava malli on tuomittu epäonnistumaan. Tästä johtuen monimutkaisempi, havaintoja yhä paremmin selittävä malli onkin jonkun rajan jälkeen huonompi, kuin yksinkertaisempi malli.</p>
<blockquote>
<p>monimutkaisempi, havaintoja yhä paremmin selittävä malli onkin jonkun rajan jälkeen huonompi, kuin yksinkertaisempi malli.</p>
</blockquote>
<p><strong>Missikilpailussa</strong> tavoitteena oli käyttää hyväksi vuoden 2016 kilpailijoiden kuvia ja muita tietoja ja ennustaa top3 ja voittaja. Yksi tapa lähestyä asiaa on muodostaa jokaiselle kilpailijalle todennäköisyys päästä kolmen parhaan joukkoon.</p>
<p>Tämän ongelman ratkaisemiseksi käytetään perinteisesti <em>logistista regressiota</em>, joka on paljon käytetty versio lineaarisesta mallista. Logistisen regression avulla voidaan tuottaa halutut todennäköisyydet kuulua yhteen kahdesta luokasta.</p>
<p>Edellä mainituista ongelmista johtuen menetelmää ei kuitenkaan voinut suoraan soveltaa aineistoon. Liian monen selittäjän ongelman pystyi kuitenkin missikilpailun tapauksessa ratkaisemaan neljässä vaiheessa:</p>
<ol>
<li>Tiivistetään missikuvien olennainen informaatio pienempään ulottuvuuteen</li>
<li>Muodostetaan logistinen regressiomalli, mutta pakotetaan osa selittäjien painoista nollaan, poistaen selittäjät mallista.</li>
<li>Tehdään vaiheet 1-2 usealla eri tavalla ja valitaan parhaat 20%.</li>
<li>Keskiarvoistetaan parhaiden mallien tuottamat ennusteet.</li>
</ol>
<p><strong>Vaihe yksi</strong> suoritettiin tekemällä <em>pääkomponenttianalyysi</em> (principal component analysis, PCA). Tämä on <em>lineaarialgebran</em> menetelmä, jossa matriisi hajoitetaan osiin, jotka voidaan sitten järjestää tärkeyden mukaan ja valita tärkeimmät. Kuvassa erilaisia PCA esityksia voittaja Shirly Karvisen kuvasta.</p>
<p>[caption id=&quot;&quot; align=&ldquo;alignnone&rdquo; width=&ldquo;344&rdquo;]<img src="http://gdurl.com/M27x" alt=""> Kuvassa Miss Suomi 2016 Shirly Karvinen esitettynä missiaineiston pääkomponenttianalyysin kautta. Viimeisessä ruudussa alkuperäinen 64x64 kuva on esitetty vain 5 numeron avulla.[/caption]</p>
<p><strong>Vaihe kaksi</strong> suoritettiin sovittamalla logistinen regressiomalli käyttäen <em>l1-regularisaatioa</em>. Tässä menetelmässä sopivat painot $$w$$ etsitään sillä lisäyksellä, että nollasta poikkeavien painojen käytöstä rangaistaan. Täten suositaan yksinkertaisempia malleja.</p>
<blockquote>
<p>Ristiinvalidointi on ehkäpä yksi tärkeimmistä menetelmistä, mitä tietojenkäsittelyn puolelta on tuotu mukaan tilastotieteen piiriin.</p>
</blockquote>
<p><strong>Kolmannessa vaiheessa</strong> parhaat mallit valittiin yksi-pois <em>ristiinvalidoinnin</em> avulla (leave-one-out cross-validation). Ristiinvalidointi on ehkäpä yksi tärkeimmistä menetelmistä, mitä tietojenkäsittelyn puolelta on tuotu mukaan tilastotieteen piiriin. Ideana on arvioida mallin hyvyys sen perusteella, miten hyvin se kykenee ennustamaan tuntematonta aineistoa. Tällöin koko aineistoa ei koskaan käytetä mallin etsimiseen.</p>
<p>Yksi-pois -menetelmässä jätetään aina vuorolla yksi havainnoista pois ja arvioidaan, kuinka hyvin muiden havaintojen pohjalta etsitty malli ennustaa pois jätettyä havaintoa. Näin voidaan arvioida erilaisten mallien hyvyyttä hyvin konreettisesti.</p>
<p><strong>Neljättä</strong>, eli viimeistä vaihetta sanotaan <em>ensemblen</em> muodostamiseksi. Yleensä tämä tarkoittaa usean erilaisen mallin tulosten yhdistämistä keskiarvoistamalla mallien ennusteet. Tässä tapauksessa keskiarvoistettiin usean samankaltaisen mallin tulokset.</p>
<p>Lopulta näiden vaiheiden jälkeen malli ennusti kaksi top3 -kilpailijaa oikein, mitä pidän hyvänä saavutuksena. Todennäköisesti loppujen lopuksi missikilpailussa muillakin tekijöillä, kuin ulkonäöllä on merkitystä.</p>
<p> </p>
<p><em>Tyyppiarvon kilpailuun osallistuneiden ennusteista muodostettu ensemble <a href="http://tyyppiarvo.com/2016/05/tyyppiarvo-ennustaa-ketka-ovat-taman-illan-miss-suomi-kilpailun-karkikolmikko/">ennusti</a> myös kaksi top3 -kilpailijaa oikein.</em></p>



                </div>

                
            </div>
        </div>
    </div>
</div>

<section id="comments">
    <div class="py-3 content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-lg-8">
                    <div class="comments">
                        <script src="https://utteranc.es/client.js" repo=""
                            issue-term="pathname" label="comment" theme="github-light" crossorigin="anonymous" async>
                            </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



    

    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/stan.min.js" defer></script>
        
        <script>
            window.addEventListener('load', function() {
                hljs.initHighlighting();
            }, true);
        </script>
    

    

    
    
        
<script src="https://tyyppiarvo.netlify.app/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
</body>

</html>
